
#
# Begin: init
# Time: Wed Sep 18 20:16:45 2013
#


git_clone('https://github.com/raspberrypi/tools', '/home/pi/tools', '')
Already cloned

=> cd /home/pi/tools && git pull
Already up-to-date.


 Get firmware
--------------

=> git ls-remote -h https://github.com/raspberrypi/firmware refs/heads/master
fadc4cbd10d8144d301c894dd9975704db6206fa	refs/heads/master



 Get kernel source
-------------------

git_clone('https://github.com/raspberrypi/linux', '/home/pi/linux', 'rpi-3.6.y')
Already cloned

=> cd /home/pi/linux && git checkout -- .

=> cd /home/pi/linux && git checkout rpi-3.6.y
Switched to branch 'rpi-3.6.y'

=> cd /home/pi/linux && git pull
Already up-to-date.

=> cd /home/pi/linux && git checkout cbd6672e7e1b2dc5026f5dc7929a13a9a68f2a62

Note: checking out 'cbd6672e7e1b2dc5026f5dc7929a13a9a68f2a62'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at cbd6672... Add new config options: CPU_FREQ_STAT_DETAILS, DUMMY, QFMT_V1, QFMT_V2, DLM


 
Get DMA capable SPI master driver
------------------------------------

=> wget -O /home/pi/linux/drivers/spi/spi-bcm2708.c https://raw.github.com/notro/spi-bcm2708/master/spi-bcm2708.c
--2013-09-18 20:16:51--  https://raw.github.com/notro/spi-bcm2708/master/spi-bcm2708.c
Resolving raw.github.com (raw.github.com)... 185.31.16.133
Connecting to raw.github.com (raw.github.com)|185.31.16.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 26671 (26K) [text/plain]
Saving to: `/home/pi/linux/drivers/spi/spi-bcm2708.c'

     0K .......... .......... ......                          100%  554K=0.05s

2013-09-18 20:16:51 (554 KB/s) - `/home/pi/linux/drivers/spi/spi-bcm2708.c' saved [26671/26671]



 Apply kernel patches
----------------------

=> cd /home/pi/linux && git apply -v /home/pi/rpi-build/patches/fbtft.patch
Checking patch drivers/video/Kconfig...
Checking patch drivers/video/Makefile...
Applied patch drivers/video/Kconfig cleanly.
Applied patch drivers/video/Makefile cleanly.

=> cd /home/pi/linux && git apply -v /home/pi/rpi-build/patches/bcm2708.patch
Checking patch arch/arm/mach-bcm2708/bcm2708.c...
Applied patch arch/arm/mach-bcm2708/bcm2708.c cleanly.


 
Get FBTFT
------------

git_clone('https://github.com/notro/fbtft.git', '/home/pi/linux/drivers/video/fbtft', '')
Already cloned

=> cd /home/pi/linux/drivers/video/fbtft && git pull
Already up-to-date.

#
# End: init
# Time: Wed Sep 18 20:16:53 2013
# Elapsed: 0.13 min
#


#
# Begin: config
# Time: Wed Sep 18 20:16:53 2013
#



 make mrproper
---------------

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make mrproper
  CLEAN   .
  CLEAN   arch/arm/kernel
  CLEAN   drivers/tty/vt
  CLEAN   drivers/video/logo
  CLEAN   firmware
  CLEAN   kernel/debug/kdb
  CLEAN   kernel
  CLEAN   lib/raid6
  CLEAN   lib
  CLEAN   arch/arm/boot/compressed
  CLEAN   arch/arm/boot
  CLEAN   .tmp_versions
  CLEAN   scripts/basic
  CLEAN   scripts/genksyms
  CLEAN   scripts/kconfig
  CLEAN   scripts/mod
  CLEAN   scripts
  CLEAN   include/config include/generated arch/arm/include/generated
  CLEAN   .config .config.old .version include/linux/version.h Module.symvers


 Get config from the Raspberry Pi standard kernel
--------------------------------------------------

=> /home/pi/linux/scripts/extract-ikconfig /home/pi/firmware/boot/kernel.img > /home/pi/linux/.config
tail: write error: Broken pipe

=> cp -a /home/pi/linux/.config /home/pi/linux/.config.standard


 Build all FBTFT modules as loadable modules
---------------------------------------------

=> cd /home/pi/linux && yes m | ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make oldconfig
  HOSTCC  scripts/basic/fixdep
  HOSTCC  scripts/kconfig/conf.o
  SHIPPED scripts/kconfig/zconf.tab.c
  SHIPPED scripts/kconfig/zconf.lex.c
  SHIPPED scripts/kconfig/zconf.hash.c
  HOSTCC  scripts/kconfig/zconf.tab.o
  HOSTLD  scripts/kconfig/conf
scripts/kconfig/conf --oldconfig Kconfig
*
* Restart config...
*
*
* Support for small TFT LCD display modules
*
Support for small TFT LCD display modules (FB_TFT) [N/m/y] (NEW)   FB driver for the HX8340BN LCD Controller (FB_TFT_HX8340BN) [N/m/?] (NEW)   FB driver for the HX8347D LCD Controller (FB_TFT_HX8347D) [N/m/?] (NEW)   FB driver for the ILI9320 LCD Controller (FB_TFT_ILI9320) [N/m/?] (NEW)   FB driver for the ILI9325 LCD Controller (FB_TFT_ILI9325) [N/m/?] (NEW)   FB driver for the ILI9341 LCD Controller (FB_TFT_ILI9341) [N/m/?] (NEW)   FB driver for the PCD8544 LCD Controller (FB_TFT_PCD8544) [N/m/?] (NEW)   FB driver for the SSD1289 LCD Controller (FB_TFT_SSD1289) [N/m/?] (NEW)   FB driver for the SSD1351 LCD Controller (FB_TFT_SSD1351) [N/m/?] (NEW)   FB driver for the ST7735R LCD Controller (FB_TFT_ST7735R) [N/m/?] (NEW)   FB driver for the WATTEROTT LCD Controller (FB_TFT_WATTEROTT) [N/m/?] (NEW)   Generic FB driver for TFT LCD displays (FB_FLEX) [N/m/?] (NEW)   Module to for adding FBTFT devices (FB_TFT_FBTFT_DEVICE) [N/m] (NEW) #
# configuration written to .config
#
yes: standard output: Broken pipe
yes: write error


 Add all console fonts as builtins
-----------------------------------

=> cd /home/pi/linux && scripts/config --enable FONTS

=> cd /home/pi/linux && yes y | ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make oldconfig
scripts/kconfig/conf --oldconfig Kconfig
*
* Restart config...
*
*
* Console display driver support
*
Framebuffer Console support (FRAMEBUFFER_CONSOLE) [Y/n/m/?] y
  Map the console to the primary display device (FRAMEBUFFER_CONSOLE_DETECT_PRIMARY) [N/y/?] n
  Framebuffer Console Rotation (FRAMEBUFFER_CONSOLE_ROTATION) [N/y/?] n
Select compiled-in fonts (FONTS) [Y/n/?] y
  VGA 8x8 font (FONT_8x8) [Y/n/?] y
  VGA 8x16 font (FONT_8x16) [Y/?] y
  Mac console 6x11 font (not supported by all drivers) (FONT_6x11) [N/y/?] (NEW)   console 7x14 font (not supported by all drivers) (FONT_7x14) [N/y/?] (NEW)   Pearl (old m68k) console 8x8 font (FONT_PEARL_8x8) [N/y/?] (NEW)   Acorn console 8x8 font (FONT_ACORN_8x8) [N/y/?] (NEW)   Mini 4x6 font (FONT_MINI_4x6) [N/y] (NEW) Sparc console 8x16 font (FONT_SUN8x16) [N/y/?] (NEW) Sparc console 12x22 font (not supported by all drivers) (FONT_SUN12x22) [N/y/?] (NEW) console 10x18 font (not supported by all drivers) (FONT_10x18) [N/y/?] (NEW) #
# configuration written to .config
#
yes: standard output: Broken pipe
yes: write error


 Add touchscreen, mouse and keyboard support
---------------------------------------------

=> cd /home/pi/linux && scripts/config --enable INPUT_TOUCHSCREEN

=> cd /home/pi/linux && scripts/config --enable INPUT_MOUSE

=> cd /home/pi/linux && scripts/config --enable INPUT_KEYBOARD

=> cd /home/pi/linux && yes n | ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make oldconfig
scripts/kconfig/conf --oldconfig Kconfig
*
* Restart config...
*
*
* Keyboards
*
Keyboards (INPUT_KEYBOARD) [Y/n/?] y
  ADP5588/87 I2C QWERTY Keypad and IO Expander (KEYBOARD_ADP5588) [N/m/y/?] (NEW)   ADP5585/ADP5589 I2C QWERTY Keypad and IO Expander (KEYBOARD_ADP5589) [N/m/y/?] (NEW)   AT keyboard (KEYBOARD_ATKBD) [Y/n/m/?] (NEW)   Atmel AT42QT1070 Touch Sensor Chip (KEYBOARD_QT1070) [N/m/y/?] (NEW)   Atmel AT42QT2160 Touch Sensor Chip (KEYBOARD_QT2160) [N/m/y/?] (NEW)   DECstation/VAXstation LK201/LK401 keyboard (KEYBOARD_LKKBD) [N/m/y/?] (NEW)   GPIO Buttons (KEYBOARD_GPIO) [N/m/y/?] (NEW)   Polled GPIO buttons (KEYBOARD_GPIO_POLLED) [N/m/y/?] (NEW)   TCA6416/TCA6408A Keypad Support (KEYBOARD_TCA6416) [N/m/y/?] (NEW)   TCA8418 Keypad Support (KEYBOARD_TCA8418) [N/m/y/?] (NEW)   GPIO driven matrix keypad support (KEYBOARD_MATRIX) [N/m/y/?] (NEW)   LM8323 keypad chip (KEYBOARD_LM8323) [N/m/?] (NEW)   LM8333 keypad chip (KEYBOARD_LM8333) [N/m/y/?] (NEW)   Maxim MAX7359 Key Switch Controller (KEYBOARD_MAX7359) [N/m/y/?] (NEW)   MELFAS MCS Touchkey (KEYBOARD_MCS) [N/m/y/?] (NEW)   Freescale MPR121 Touchkey (KEYBOARD_MPR121) [N/m/y/?] (NEW)   Newton keyboard (KEYBOARD_NEWTON) [N/m/y/?] (NEW)   OpenCores Keyboard Controller (KEYBOARD_OPENCORES) [N/m/y/?] (NEW)   Samsung keypad support (KEYBOARD_SAMSUNG) [N/m/y/?] (NEW)   Stowaway keyboard (KEYBOARD_STOWAWAY) [N/m/y/?] (NEW)   Sun Type 4 and Type 5 keyboard (KEYBOARD_SUNKBD) [N/m/y/?] (NEW)   TI OMAP4+ keypad support (KEYBOARD_OMAP4) [N/m/y/?] (NEW)   XT keyboard (KEYBOARD_XTKBD) [N/m/y/?] (NEW) *
* Mice
*
Mice (INPUT_MOUSE) [Y/n/?] y
  PS/2 mouse (MOUSE_PS2) [Y/n/m/?] (NEW)   Serial mouse (MOUSE_SERIAL) [N/m/y/?] (NEW)   Apple USB Touchpad support (MOUSE_APPLETOUCH) [N/m/y/?] (NEW)   Apple USB BCM5974 Multitouch trackpad support (MOUSE_BCM5974) [N/m/y/?] (NEW)   DEC VSXXX-AA/GA mouse and VSXXX-AB tablet (MOUSE_VSXXXAA) [N/m/y/?] (NEW)   GPIO mouse (MOUSE_GPIO) [N/m/y/?] (NEW)   Synaptics I2C Touchpad support (MOUSE_SYNAPTICS_I2C) [N/m/y/?] (NEW)   Synaptics USB device support (MOUSE_SYNAPTICS_USB) [N/m/y/?] (NEW) *
* Touchscreens
*
Touchscreens (INPUT_TOUCHSCREEN) [Y/n/?] y
  ADS7846/TSC2046/AD7873 and AD(S)7843 based touchscreens (TOUCHSCREEN_ADS7846) [N/m/y/?] (NEW)   AD7877 based touchscreens (TOUCHSCREEN_AD7877) [N/m/y/?] (NEW)   Analog Devices AD7879-1/AD7889-1 touchscreen interface (TOUCHSCREEN_AD7879) [N/m/y/?] (NEW)   Atmel mXT I2C Touchscreen (TOUCHSCREEN_ATMEL_MXT) [N/m/y/?] (NEW)   AUO in-cell touchscreen using Pixcir ICs (TOUCHSCREEN_AUO_PIXCIR) [N/m/y/?] (NEW)   BU21013 based touch panel controllers (TOUCHSCREEN_BU21013) [N/m/y/?] (NEW)   cy8ctmg110 touchscreen (TOUCHSCREEN_CY8CTMG110) [N/m/y/?] (NEW)   Cypress TTSP touchscreen (TOUCHSCREEN_CYTTSP_CORE) [N/m/y/?] (NEW)   Dynapro serial touchscreen (TOUCHSCREEN_DYNAPRO) [N/m/y/?] (NEW)   Hampshire serial touchscreen (TOUCHSCREEN_HAMPSHIRE) [N/m/y/?] (NEW)   EETI touchscreen panel support (TOUCHSCREEN_EETI) [N/m/y/?] (NEW)   EETI eGalax multi-touch panel support (TOUCHSCREEN_EGALAX) [N/m/y/?] (NEW)   Fujitsu serial touchscreen (TOUCHSCREEN_FUJITSU) [N/m/y/?] (NEW)   Ilitek ILI210X based touchscreen (TOUCHSCREEN_ILI210X) [N/m/y/?] (NEW)   Gunze AHL-51S touchscreen (TOUCHSCREEN_GUNZE) [N/m/y/?] (NEW)   Elo serial touchscreens (TOUCHSCREEN_ELO) [N/m/y/?] (NEW)   Wacom W8001 penabled serial touchscreen (TOUCHSCREEN_WACOM_W8001) [N/m/y/?] (NEW)   Wacom Tablet support (I2C) (TOUCHSCREEN_WACOM_I2C) [N/m/y/?] (NEW)   MAX11801 based touchscreens (TOUCHSCREEN_MAX11801) [N/m/y/?] (NEW)   MELFAS MCS-5000 touchscreen (TOUCHSCREEN_MCS5000) [N/m/y/?] (NEW)   MELFAS MMS114 touchscreen (TOUCHSCREEN_MMS114) [N/m/y/?] (NEW)   MicroTouch serial touchscreens (TOUCHSCREEN_MTOUCH) [N/m/y/?] (NEW)   iNexio serial touchscreens (TOUCHSCREEN_INEXIO) [N/m/y/?] (NEW)   ICS MicroClock MK712 touchscreen (TOUCHSCREEN_MK712) [N/m/y/?] (NEW)   Penmount serial touchscreen (TOUCHSCREEN_PENMOUNT) [N/m/y/?] (NEW)   EDT FocalTech FT5x06 I2C Touchscreen support (TOUCHSCREEN_EDT_FT5X06) [N/m/y/?] (NEW)   Touchright serial touchscreen (TOUCHSCREEN_TOUCHRIGHT) [N/m/y/?] (NEW)   Touchwin serial touchscreen (TOUCHSCREEN_TOUCHWIN) [N/m/y/?] (NEW)   PIXCIR I2C touchscreens (TOUCHSCREEN_PIXCIR) [N/m/y/?] (NEW)   USB Touchscreen Driver (TOUCHSCREEN_USB_COMPOSITE) [N/m/y/?] (NEW)   Sahara TouchIT-213 touchscreen (TOUCHSCREEN_TOUCHIT213) [N/m/y/?] (NEW)   TSC-10/25/40 serial touchscreen support (TOUCHSCREEN_TSC_SERIO) [N/m/y/?] (NEW)   TSC2005 based touchscreens (TOUCHSCREEN_TSC2005) [N/m/y/?] (NEW)   TSC2007 based touchscreens (TOUCHSCREEN_TSC2007) [N/m/y/?] (NEW)   W90P910 touchscreen driver (TOUCHSCREEN_W90X900) [N/m/y/?] (NEW)   Sitronix ST1232 touchscreen controllers (TOUCHSCREEN_ST1232) [N/m/y/?] (NEW)   TPS6507x based touchscreens (TOUCHSCREEN_TPS6507X) [N/m/y/?] (NEW) #
# configuration written to .config
#
yes: standard output: Broken pipe
yes: write error

=> cd /home/pi/linux && scripts/config --module TOUCHSCREEN_ADS7846

=> cd /home/pi/linux && scripts/config --module MOUSE_GPIO

=> cd /home/pi/linux && scripts/config --module KEYBOARD_GPIO

=> cd /home/pi/linux && scripts/config --module KEYBOARD_GPIO_POLLED


 Verify config
---------------

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make oldconfig
scripts/kconfig/conf --oldconfig Kconfig
#
# configuration written to .config
#

#
# End: config
# Time: Wed Sep 18 20:17:24 2013
# Elapsed: 0.53 min
#


#
# Begin: extra
# Time: Wed Sep 18 21:17:43 2013
#


git_clone('https://github.com/notro/fbtft_tools', '/home/pi/fbtft_tools', '')
Already cloned

=> cd /home/pi/fbtft_tools && git pull
Already up-to-date.

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/gpio_mouse_device modules
  CC [M]  /home/pi/fbtft_tools/gpio_mouse_device/gpio_mouse_device.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/pi/fbtft_tools/gpio_mouse_device/gpio_mouse_device.mod.o
  LD [M]  /home/pi/fbtft_tools/gpio_mouse_device/gpio_mouse_device.ko

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/gpio_mouse_device INSTALL_MOD_PATH=/home/pi/modules modules_install
  INSTALL /home/pi/fbtft_tools/gpio_mouse_device/gpio_mouse_device.ko
  DEPMOD  3.6.11+

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/gpio_keys_device modules
  CC [M]  /home/pi/fbtft_tools/gpio_keys_device/gpio_keys_device.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/pi/fbtft_tools/gpio_keys_device/gpio_keys_device.mod.o
  LD [M]  /home/pi/fbtft_tools/gpio_keys_device/gpio_keys_device.ko

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/gpio_keys_device INSTALL_MOD_PATH=/home/pi/modules modules_install
  INSTALL /home/pi/fbtft_tools/gpio_keys_device/gpio_keys_device.ko
  DEPMOD  3.6.11+

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/ads7846_device modules
  CC [M]  /home/pi/fbtft_tools/ads7846_device/ads7846_device.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/pi/fbtft_tools/ads7846_device/ads7846_device.mod.o
  LD [M]  /home/pi/fbtft_tools/ads7846_device/ads7846_device.ko

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/fbtft_tools/ads7846_device INSTALL_MOD_PATH=/home/pi/modules modules_install
  INSTALL /home/pi/fbtft_tools/ads7846_device/ads7846_device.ko
  DEPMOD  3.6.11+


 Build ServoBlaster kernel module for board revision 2
-------------------------------------------------------

git_clone('https://github.com/richardghirst/PiBits', '/home/pi/PiBits', '')
Already cloned

=> cd /home/pi/PiBits && git checkout -- .

=> cd /home/pi/PiBits && git pull
Already up-to-date.

=> sed -i '1s/^/#define REV_2\n/' /home/pi/PiBits/ServoBlaster/kernel/servoblaster.c

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/PiBits/ServoBlaster/kernel modules
  CC [M]  /home/pi/PiBits/ServoBlaster/kernel/servoblaster.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/pi/PiBits/ServoBlaster/kernel/servoblaster.mod.o
  LD [M]  /home/pi/PiBits/ServoBlaster/kernel/servoblaster.ko

=> cd /home/pi/linux && ARCH=arm CROSS_COMPILE=/home/pi/tools/arm-bcm2708/arm-bcm2708-linux-gnueabi/bin/arm-bcm2708-linux-gnueabi- make M=/home/pi/PiBits/ServoBlaster/kernel INSTALL_MOD_PATH=/home/pi/modules modules_install
  INSTALL /home/pi/PiBits/ServoBlaster/kernel/servoblaster.ko
  DEPMOD  3.6.11+

#
# End: extra
# Time: Wed Sep 18 21:18:15 2013
# Elapsed: 0.53 min
#


#
# Begin: update
# Time: Wed Sep 18 21:18:15 2013
#


=> rm -rf /home/pi/rpi-firmware/*

=> mkdir -p /home/pi/rpi-firmware/modules

=> cp -a /home/pi/firmware/boot/* /home/pi/rpi-firmware/

=> cp -a /home/pi/linux/arch/arm/boot/Image /home/pi/rpi-firmware/kernel.img

=> cp -a /home/pi/modules/lib/modules/*+/ /home/pi/rpi-firmware/modules/

=> mkdir -p /home/pi/rpi-firmware/vc/sdk/opt/vc

=> cp -a /home/pi/firmware/opt/vc/include/ /home/pi/rpi-firmware/vc/sdk/opt/vc/

=> cp -a /home/pi/firmware/opt/vc/src/ /home/pi/rpi-firmware/vc/sdk/opt/vc/

=> rm -rf /home/pi/rpi-firmware/vc/sdk/opt/vc/src/hello_pi/hello_video/test.h264

=> mkdir -p /home/pi/rpi-firmware/vc/softfp/opt/vc

=> cp -a /home/pi/firmware/opt/vc/LICENCE /home/pi/rpi-firmware/vc/softfp/opt/vc

=> cp -a /home/pi/firmware/opt/vc/bin/ /home/pi/rpi-firmware/vc/softfp/opt/vc

=> cp -a /home/pi/firmware/opt/vc/lib/ /home/pi/rpi-firmware/vc/softfp/opt/vc

=> cp -a /home/pi/firmware/opt/vc/sbin/ /home/pi/rpi-firmware/vc/softfp/opt/vc

=> mkdir -p /home/pi/rpi-firmware/vc/hardfp/opt/vc

=> cp -a /home/pi/firmware/hardfp/opt/vc/LICENCE /home/pi/rpi-firmware/vc/hardfp/opt/vc

=> cp -a /home/pi/firmware/hardfp/opt/vc/bin/ /home/pi/rpi-firmware/vc/hardfp/opt/vc

=> cp -a /home/pi/firmware/hardfp/opt/vc/lib/ /home/pi/rpi-firmware/vc/hardfp/opt/vc

=> cp -a /home/pi/firmware/hardfp/opt/vc/sbin/ /home/pi/rpi-firmware/vc/hardfp/opt/vc

=> mkdir -p /home/pi/rpi-firmware/extra

=> cp -a /home/pi/linux/Module.symvers /home/pi/rpi-firmware/extra/

=> cp -a /home/pi/linux/System.map /home/pi/rpi-firmware/extra/

=> cp -a /home/pi/linux/.config /home/pi/rpi-firmware/extra/

#
# End: update
# Time: Wed Sep 18 21:18:18 2013
# Elapsed: 0.05 min
#


=> git ls-remote -h https://github.com/raspberrypi/firmware refs/heads/master
fadc4cbd10d8144d301c894dd9975704db6206fa	refs/heads/master


=> cd /home/pi/linux && git rev-parse HEAD
cbd6672e7e1b2dc5026f5dc7929a13a9a68f2a62


=> cd /home/pi/linux/drivers/video/fbtft && git rev-parse HEAD
e207c4ec58429d24e8a03de5dce800c1a03dd36e


=> cd /home/pi/fbtft_tools && git rev-parse HEAD
3c63895e612ceacd48c5a6956535a363e5685439


=> cd /home/pi/PiBits && git rev-parse HEAD
3f4804aa906525ca3be42ecce30914eeec02af4d


=> cd /home/pi/spi-bcm2708 && git rev-parse HEAD
3209afa4e96c8a6e1f6e582b305d9468aa64d5f9

=> writef(/home/pi/rpi-firmware/README.md)

notro/rpi-firmware
=======================================================

Raspberry Pi kernel and firmware with support for FBTFT.


Build scripts used: https://github.com/notro/rpi-build  
Build logs in the [extra/](https://github.com/notro/rpi-firmware/tree/master/extra) directory


### Install

If [rpi-update](https://github.com/Hexxeh/rpi-update) is older than 12. august 2013, then it has to be manually updated first (or REPO_URI will be overwritten):
```text
sudo wget https://raw.github.com/Hexxeh/rpi-update/master/rpi-update -O /usr/bin/rpi-update && sudo chmod +x /usr/bin/rpi-update
```

Because of an [issue](https://github.com/Hexxeh/rpi-update/issues/106), the following command is needed when going from the vanilla kernel to this kernel (not needed on subsequent notro/rpi-firmware updates):
```text
sudo mv /lib/modules/$(uname -r) /lib/modules/$(uname -r).bak
```

**Install**
```text
sudo REPO_URI=https://github.com/notro/rpi-firmware rpi-update
sudo shutdown -r now
```


### Sources

* Firmware  
https://github.com/raspberrypi/firmware/tree/fadc4cbd10d8144d301c894dd9975704db6206fa
* Linux kernel  
https://github.com/raspberrypi/linux/tree/cbd6672e7e1b2dc5026f5dc7929a13a9a68f2a62
* FBTFT  
https://github.com/notro/fbtft/tree/e207c4ec58429d24e8a03de5dce800c1a03dd36e
* [gpio_mouse_device](https://github.com/notro/fbtft_tools/wiki/gpio_mouse_device), [gpio_keys_device](https://github.com/notro/fbtft_tools/wiki/gpio_keys_device), [ads7846_device](https://github.com/notro/fbtft_tools/wiki/ads7846_device)  
https://github.com/notro/fbtft_tools/tree/3c63895e612ceacd48c5a6956535a363e5685439
* ServoBlaster  
https://github.com/richardghirst/PiBits/tree/3f4804aa906525ca3be42ecce30914eeec02af4d
* DMA capable SPI master driver [spi-bcm2708](https://github.com/notro/spi-bcm2708/wiki)  
https://github.com/notro/spi-bcm2708/tree/3209afa4e96c8a6e1f6e582b305d9468aa64d5f9


### Kernel patches

* [fbtft.patch](https://github.com/notro/rpi-build/blob/master/patches/fbtft.patch)
* [bcm2708.patch](https://github.com/notro/rpi-build/blob/master/patches/bcm2708.patch)


### Kernel configuration changes

Deleted:  
```text
CONFIG_BACKLIGHT_CLASS_DEVICE=m
```

Added:  
```text
CONFIG_BACKLIGHT_CLASS_DEVICE=y
CONFIG_FB_BACKLIGHT=y
CONFIG_FB_DEFERRED_IO=y
CONFIG_FB_FLEX=m
CONFIG_FB_SYS_COPYAREA=m
CONFIG_FB_SYS_FILLRECT=m
CONFIG_FB_SYS_FOPS=m
CONFIG_FB_SYS_IMAGEBLIT=m
CONFIG_FB_TFT=m
CONFIG_FB_TFT_FBTFT_DEVICE=m
CONFIG_FB_TFT_HX8340BN=m
CONFIG_FB_TFT_HX8347D=m
CONFIG_FB_TFT_ILI9320=m
CONFIG_FB_TFT_ILI9325=m
CONFIG_FB_TFT_ILI9341=m
CONFIG_FB_TFT_PCD8544=m
CONFIG_FB_TFT_SSD1289=m
CONFIG_FB_TFT_SSD1351=m
CONFIG_FB_TFT_ST7735R=m
CONFIG_FB_TFT_WATTEROTT=m
CONFIG_FONTS=y
CONFIG_FONT_10x18=y
CONFIG_FONT_6x11=y
CONFIG_FONT_7x14=y
CONFIG_FONT_ACORN_8x8=y
CONFIG_FONT_MINI_4x6=y
CONFIG_FONT_PEARL_8x8=y
CONFIG_FONT_SUN12x22=y
CONFIG_FONT_SUN8x16=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_INPUT_MOUSE=y
CONFIG_INPUT_TOUCHSCREEN=y
CONFIG_KEYBOARD_GPIO=m
CONFIG_KEYBOARD_GPIO_POLLED=m
CONFIG_MOUSE_GPIO=m
CONFIG_TOUCHSCREEN_ADS7846=m
```

